{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block head_title %}{% trans "Sign In" %}{% endblock %}

{% block content %}
<<<<<<< HEAD
<div class="flex-1 w-full min-h-full flex items-center justify-center" 
     x-data="{ 
        showPassword: false, 
        loading: false,
        showMessage: true,
        formData: {
            login: '',
            password: '',
            remember: false
        },
        async handleSubmit() {
            if (this.loading) return;
            this.loading = true;
            this.showMessage = true;
            await new Promise(resolve => setTimeout(resolve, 100));
            this.$refs.loginForm.submit();
        }
     }">
    <div class="w-full sm:max-w-sm mx-auto min-h-full sm:min-h-0">
        <div class="card bg-primary shadow-xl min-h-full sm:min-h-0 rounded-none sm:rounded-2xl">
            <div class="card-body justify-center text-primary-content">
                <h1 class="text-3xl font-bold text-center">{% trans "Welcome Back" %}</h1>
                
                <form method="POST" 
                      action="{% url 'account_login' %}" 
                      x-ref="loginForm"
                      @submit.prevent="handleSubmit()"
                      class="space-y-4">
                    {% csrf_token %}

                    <!-- Messages -->
                    {% if form.errors or messages %}
                    <div x-show="showMessage"
                         x-transition:enter="transition ease-out duration-300"
                         x-transition:enter-start="opacity-0 transform -translate-y-2"
                         x-transition:enter-end="opacity-100 transform translate-y-0"
                         x-transition:leave="transition ease-in duration-200"
                         x-transition:leave-start="opacity-100 transform translate-y-0"
                         x-transition:leave-end="opacity-0 transform -translate-y-2">
                        
                        {% if form.errors %}
                        <div class="alert alert-error shadow-lg" role="alert">
                            <div class="flex items-center gap-2">
                                <iconify-icon icon="octicon:stop-16" class="w-6 h-6"></iconify-icon>
                                <div class="flex flex-col">
                                    <span class="font-bold">{% trans "Login Failed" %}</span>
                                    <span class="text-sm">
                                        {% if form.non_field_errors %}
                                            {{ form.non_field_errors.0 }}
                                        {% else %}
                                            {% trans "Invalid email/username or password." %}
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <button @click="showMessage = false" class="btn btn-ghost btn-xs">
                                <iconify-icon icon="octicon:x-16"></iconify-icon>
                            </button>
                        </div>
                        {% endif %}

                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} shadow-lg" role="alert">
                            <div class="flex items-center gap-2">
                                <iconify-icon icon="octicon:info-16" 
                                            class="w-6 h-6 {% if message.tags == 'success' %}text-success{% endif %}">
                                </iconify-icon>
                                <span>{{ message }}</span>
                            </div>
                            <button @click="showMessage = false" class="btn btn-ghost btn-xs">
                                <iconify-icon icon="octicon:x-16"></iconify-icon>
                            </button>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <!-- Email/Username Field -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text text-primary-content/90">{% trans "Email or Username" %}</span>
                        </label>
                        <input type="text" 
                               name="login" 
                               id="id_login" 
                               x-model="formData.login"
                               :disabled="loading"
                               class="input bg-primary-content/10 input-bordered border-primary-content/20 focus:border-primary-content focus:ring-1 focus:ring-primary-content disabled:bg-primary-content/5 text-primary-content placeholder-primary-content/50" 
                               placeholder="{% trans 'Enter your email or username' %}"
                               {% if form.login.value %}value="{{ form.login.value }}"{% endif %}
                               required />
                        {% if form.login.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">{{ form.login.errors.0 }}</span>
                        </label>
                        {% endif %}
                    </div>

                    <!-- Password Field with Toggle -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text text-primary-content/90">{% trans "Password" %}</span>
                        </label>
                        <div class="relative">
                            <input :type="showPassword ? 'text' : 'password'"
                                   name="password" 
                                   id="id_password"
                                   x-model="formData.password"
                                   :disabled="loading"
                                   class="input bg-primary-content/10 input-bordered border-primary-content/20 w-full pr-10 focus:border-primary-content focus:ring-1 focus:ring-primary-content disabled:bg-primary-content/5 text-primary-content" 
                                   required />
                            <button type="button" 
                                    @click="showPassword = !showPassword" 
                                    :disabled="loading"
                                    class="absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-sm btn-circle text-primary-content disabled:bg-transparent">
                                <iconify-icon :icon="showPassword ? 'octicon:eye-closed-24' : 'octicon:eye-24'"
                                            class="transition-opacity"
                                            :class="loading ? 'opacity-50' : 'opacity-100'">
                                </iconify-icon>
                            </button>
                        </div>
                        {% if form.password.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">{{ form.password.errors.0 }}</span>
                        </label>
                        {% endif %}
                    </div>

                    <!-- Options Row -->
                    <div class="flex items-center justify-between text-primary-content/90">
                        <label class="label cursor-pointer gap-2" :class="{ 'cursor-not-allowed': loading }">
                            <input type="checkbox" 
                                   name="remember" 
                                   id="id_remember" 
                                   x-model="formData.remember"
                                   :disabled="loading"
                                   class="checkbox checkbox-primary checkbox-sm" />
                            <span class="label-text text-primary-content/90" :class="{ 'opacity-50': loading }">{% trans "Remember me" %}</span>
                        </label>
                        <a href="{% url 'account_reset_password' %}" 
                           class="link link-hover text-primary-content/90 hover:text-primary-content text-sm">
                            {% trans "Forgot Password?" %}
                        </a>
                    </div>

                    {% if redirect_field_value %}
                    <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                    {% endif %}

                    <!-- Submit Button -->
                    <button type="submit" 
                            class="btn bg-primary-content text-primary hover:bg-primary-content/90 w-full border-none" 
                            :disabled="loading || !formData.login || !formData.password">
                        <div class="flex items-center justify-center gap-2">
                            <span class="loading loading-spinner loading-sm" 
                                  x-cloak 
                                  x-show="loading"></span>
                            <span x-text="loading ? '{% trans "Verifying..." %}' : '{% trans "Sign In" %}'"></span>
                        </div>
                    </button>

                    <!-- Sign Up Link -->
                    <div class="text-center">
                        <p class="text-sm text-primary-content/80">
                            {% blocktrans %}
                            New here?
                            <a href="{{ signup_url }}" class="link hover:text-primary-content font-medium">Create an account</a>
                            {% endblocktrans %}
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
=======
<div class="min-h-[65vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-[#fce8dd]">
    <div class="max-w-md w-full space-y-8 bg-[#fff5ef] p-8 rounded-2xl shadow-lg">
        <!-- Header -->
        <div>
            <h2 class="mt-6 text-center text-3xl font-bold text-[#2c2c2c]">
                {% trans "Sign In" %}
            </h2>
            <p class="mt-2 text-center text-sm text-[#666666]">
                {% blocktrans %}
                Don't have an account yet?
                <a href="{{ signup_url }}" class="font-medium text-[#e28b67] hover:text-[#c77857]">
                    Sign up
                </a>
                {% endblocktrans %}
            </p>
        </div>

        <!-- Form -->
        <form class="mt-8 space-y-6" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}

            <!-- Error Messages -->
            {% if form.errors %}
            <div class="rounded-xl bg-red-50 p-4 mb-4">
                <div class="flex">
                    <div class="text-sm text-red-700">
                        {% for error in form.non_field_errors %}
                        <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Login Fields -->
            <div class="rounded-xl shadow-sm space-y-3">
                <div>
                    <label for="id_login" class="sr-only">{% trans "Email" %}</label>
                    <input id="id_login" name="login" type="email" required
                        class="appearance-none relative block w-full px-4 py-3 border border-[#e6d5cc] rounded-xl placeholder-[#999999] text-[#2c2c2c] focus:outline-none focus:ring-2 focus:ring-[#e28b67] focus:border-[#e28b67] sm:text-sm bg-white"
                        placeholder="{% trans 'Email address' %}">
                    {% if form.login.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ form.login.errors.0 }}</p>
                    {% endif %}
                </div>
                <div>
                    <label for="id_username" class="sr-only">{% trans "Username" %}</label>
                    <input id="id_username" name="username" type="text" required
                        class="appearance-none relative block w-full px-4 py-3 border border-[#e6d5cc] rounded-xl placeholder-[#999999] text-[#2c2c2c] focus:outline-none focus:ring-2 focus:ring-[#e28b67] focus:border-[#e28b67] sm:text-sm bg-white"
                        placeholder="{% trans 'Username' %}">
                    {% if form.username.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ form.username.errors.0 }}</p>
                    {% endif %}
                </div>
                <div>
                    <label for="id_password" class="sr-only">{% trans "Password" %}</label>
                    <input id="id_password" name="password" type="password" required
                        class="appearance-none relative block w-full px-4 py-3 border border-[#e6d5cc] rounded-xl placeholder-[#999999] text-[#2c2c2c] focus:outline-none focus:ring-2 focus:ring-[#e28b67] focus:border-[#e28b67] sm:text-sm bg-white"
                        placeholder="{% trans 'Password' %}">
                    {% if form.password.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ form.password.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- Remember Me -->
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <input id="id_remember" name="remember" type="checkbox"
                        class="h-4 w-4 text-[#e28b67] focus:ring-[#e28b67] border-[#e6d5cc] rounded">
                    <label for="id_remember" class="ml-2 block text-sm text-[#666666]">
                        {% trans "Remember me" %}
                    </label>
                </div>

                {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                {% endif %}
            </div>

            <!-- Submit Button -->
            <div>
                <button type="submit"
                    class="w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-[#e28b67] hover:bg-[#c77857] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#e28b67] transition-colors">
                    {% trans "Sign In" %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock content %}
>>>>>>> 336107e031fd801cd8e364b15cd823a0d8b89e2a
