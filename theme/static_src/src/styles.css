@tailwind base;

@layer base {
    /* work-sans-latin-wght-normal */
    @font-face {
        font-family: 'Work Sans Variable';
        font-style: normal;
        font-display: swap;
        font-weight: 100 900;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/work-sans:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
        unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
    }

    /* Scrollbar styles */
    * {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--p)) transparent;
    }

    *::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    *::-webkit-scrollbar-track {
        background: transparent;
    }

    *::-webkit-scrollbar-thumb {
        background-color: hsl(var(--p)/0.3);
        border-radius: 20px;
    }

    /* Ensure proper scrolling behavior */
    html, body {
        @apply h-full overflow-hidden;
    }

    /* Main content area scrolling */
    main {
        @apply h-full overflow-y-auto;
    }
}

@tailwind components;

@layer components {
    /* Calendar Component */
    .fc {
        --fc-border-color: hsl(var(--b3));
        --fc-button-text-color: hsl(var(--pc));
        --fc-button-bg-color: hsl(var(--p));
        --fc-button-border-color: hsl(var(--p));
        --fc-button-hover-bg-color: hsl(var(--pf));
        --fc-button-hover-border-color: hsl(var(--pf));
        --fc-button-active-bg-color: hsl(var(--pf));
        --fc-button-active-border-color: hsl(var(--pf));
    }

    /* Navigation */
    .nav-item {
        @apply relative overflow-visible ring-0 transform-gpu transition-all duration-300;
        transform-style: preserve-3d;
        backface-visibility: hidden;
        transform-origin: left center;
        will-change: transform, opacity;
    }

    .nav-item::after {
        content: '';
        @apply absolute bottom-0 left-0 right-0 h-0.5 bg-current transform scale-x-0 transition-transform duration-300;
    }

    .nav-item:hover {
        @apply ring-2 ring-primary/50 ring-offset-1 ring-offset-base-100 scale-105;
    }

    /* Theme Preview */
    .theme-preview {
        @apply w-6 h-6 rounded-full border-2 border-base-content/20 relative;
    }

    .theme-preview::before {
        content: '';
        @apply absolute inset-[2px] rounded-full bg-gradient-to-tr from-primary to-secondary;
    }

    /* User Avatar */
    .user-avatar::after {
        content: '';
        @apply absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-success border-2 border-base-200;
    }

    /* Table Styles */
    .table-container {
        @apply relative max-h-[400px] min-h-[200px] overflow-y-auto touch-pan-y;
    }

    .table-pin-rows thead tr {
        @apply sticky top-0 z-10 backdrop-blur-lg bg-base-100/95;
    }

    /* Tom Select Styles */
    .ts-wrapper {
        @apply relative w-full font-normal;
    }

    .ts-control {
        @apply px-3 py-2 bg-base-100 border border-base-300 rounded-xl shadow-sm;
    }

    .ts-dropdown {
        @apply fixed bg-base-100 border border-base-300 rounded-xl shadow-lg mt-1;
        max-height: min(400px, 40vh) !important;
        z-index: 100;
    }

    .ts-dropdown-content {
        @apply overflow-y-auto;
        max-height: min(400px, 40vh) !important;
    }

    /* Sticky form actions */
    .form-actions-sticky {
        @apply fixed bottom-0 left-0 right-0 z-10 bg-base-200 border-t border-base-300;
        @apply lg:left-[20rem];  /* Adjust for sidebar width */
        
        /* Handle collapsed sidebar */
        .sidebar-collapsed & {
            @apply lg:left-[5rem];
        }
    }

    /* Page Transitions */
    .page-transition-wrapper {
        @apply relative min-h-full;
    }

    .page-enter {
        @apply transition-all duration-300 ease-out;
        animation: page-enter 0.3s ease-out;
    }

    .page-leave {
        @apply transition-all duration-200 ease-in;
        animation: page-leave 0.2s ease-in;
    }

    /* Form Transitions */
    .form-section {
        @apply transition-all duration-300 ease-out;
        animation: section-enter 0.4s ease-out;
    }

    .form-actions {
        @apply transition-all duration-300;
        animation: slide-up 0.3s ease-out;
    }
}

@tailwind utilities;

@layer utilities {
    /* Animation Utilities */
    .icon-hover {
        @apply transform-gpu transition-all duration-200;
    }

    .icon-animate {
        @apply transform-gpu transition-all duration-300 relative;
        backface-visibility: hidden;
        transform-origin: center;
        will-change: transform;
    }

    .ease-spring {
        transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .content-shift {
        @apply transition-[margin,width] duration-300 ease-in-out;
    }

    .backface-hidden {
        backface-visibility: hidden;
        transform-style: preserve-3d;
    }

    /* View Transition Utilities */
    .fade-enter {
        @apply transition-opacity duration-300 ease-out;
    }

    .slide-enter {
        @apply transition-all duration-300 ease-out transform;
    }

    .zoom-enter {
        @apply transition-all duration-300 ease-out transform;
    }
}

/* Animations */
@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes icon-pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(0.95);
    }
}

@keyframes icon-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes loading {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes page-enter {
    0% {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes page-leave {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-20px) scale(0.98);
    }
}

@keyframes section-enter {
    0% {
        opacity: 0;
        transform: translateY(10px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slide-up {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
