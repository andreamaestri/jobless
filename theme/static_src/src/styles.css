@tailwind base;

@layer base {
    /* Root Custom Properties */
    :root {
        --quick-letter-scale: 1.2;
        --quick-letter-hover-scale: 1.8;
        --quick-letter-spacing: 0.5rem;
    }

    @screen sm {
        :root {
            --quick-letter-scale: 1;
            --quick-letter-hover-scale: 1.4;
            --quick-letter-spacing: 0.25rem;
        }
    }

    /* Font Face */
    @font-face {
        font-family: 'Work Sans Variable';
        font-style: normal;
        font-display: swap;
        font-weight: 100 900;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/work-sans:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
        unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
    }

    /* Scrollbar Styles */
    * {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--p)/0.3) transparent;
    }

    *::-webkit-scrollbar {
        @apply w-1.5 h-1.5;
    }

    *::-webkit-scrollbar-track {
        @apply bg-transparent;
    }

    *::-webkit-scrollbar-thumb {
        @apply bg-primary/30 rounded-full hover:bg-primary/50 transition-colors;
    }

    /* Base Layout */
    html, body {
        @apply h-full;
    }

    main {
        @apply h-full overflow-y-auto;
    }

    /* Interactive Elements */
    button, a, input, select, textarea {
        @apply relative z-10;
    }
}

@tailwind components;

@layer components {
    /* Calendar Component */
    .fc {
        --fc-border-color: hsl(var(--b3));
        --fc-button-text-color: hsl(var(--pc));
        --fc-button-bg-color: hsl(var(--p));
        --fc-button-border-color: hsl(var(--p));
        --fc-button-hover-bg-color: hsl(var(--pf));
        --fc-button-hover-border-color: hsl(var(--pf));
        --fc-button-active-bg-color: hsl(var(--pf));
        --fc-button-active-border-color: hsl(var(--pf));
    }

    /* Navigation and Interactive Elements */
    .nav-item {
        @apply relative overflow-visible transform-gpu transition-all duration-300;
        @apply hover:ring-2 hover:ring-primary/50 hover:ring-offset-1 hover:ring-offset-base-100 hover:scale-105;
        @apply focus:outline-none focus:ring-2 focus:ring-primary;
        transform-style: preserve-3d;
        backface-visibility: hidden;
    }

    .nav-item-indicator {
        @apply absolute bottom-0 left-0 right-0 h-0.5 bg-current transform scale-x-0 transition-transform duration-300;
    }

    /* Theme and User Elements */
    .theme-preview {
        @apply w-6 h-6 rounded-full border-2 border-base-content/20 relative;
    }

    .theme-preview-gradient {
        @apply absolute inset-[2px] rounded-full bg-gradient-to-tr from-primary to-secondary;
    }

    .user-avatar-status {
        @apply absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-success border-2 border-base-200;
    }

    /* Table Styles */
    .table-container {
        @apply relative overflow-y-auto touch-pan-y;
    }

    .table-header-sticky {
        @apply sticky top-0 z-10 backdrop-blur-lg bg-base-100/95;
    }

    /* Dropdown Menu Container */
    .dropdown-menu-container {
        @apply fixed z-50;
    }

    .dropdown-menu-container .dropdown-content {
        @apply shadow-lg border border-base-300;
        @apply bg-base-100 backdrop-blur-md;
        @apply animate-fade-in;
        transform-origin: top right;
    }

    .dropdown-menu-container .dropdown-content.hidden {
        @apply animate-none;
    }

    /* Tom Select Styles */
    .ts-wrapper {
        min-height: 120px;
        border: 1px solid hsl(var(--bc) / 0.2);
        border-radius: 0.5rem;
        padding: 0.5rem;
    }
    
    .ts-wrapper.focus {
        border-color: hsl(var(--p) / 0.5);
        box-shadow: 0 0 0 2px hsl(var(--p) / 0.2);
    }
    
    .ts-control {
        border: none !important;
        padding: 0 !important;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    
    .ts-dropdown {
        border: 1px solid hsl(var(--bc) / 0.2);
        border-radius: 0.75rem;
        box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.15), 0 4px 10px -6px rgb(0 0 0 / 0.1);
        padding: 0.75rem;
        margin-top: 0.75rem;
        max-height: 400px;
        position: absolute;
        z-index: 100;
        background: hsl(var(--b1));
        width: 100%;
        overflow-y: auto;
    }
    
    .ts-dropdown .optgroup {
        padding: 0;
        border: none;
    }
    
    .ts-dropdown .optgroup-header {
        font-size: 1.25rem;
        font-weight: 600;
        color: hsl(var(--p));
        padding: 1rem 0.75rem 0.5rem;
        background: hsl(var(--b1));
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    .ts-dropdown .option {
        padding: 0.5rem !important;
        margin: 0.25rem 0;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }
    
    .ts-dropdown .active {
        background-color: hsl(var(--p) / 0.1);
        color: hsl(var(--p));
    }
    
    .ts-dropdown .option:hover {
        background-color: hsl(var(--b2));
        transform: translateX(4px);
    }
    
    .ts-dropdown .option.active:hover {
        background-color: hsl(var(--p) / 0.15);
    }
    
    .ts-wrapper.multi .ts-control > div {
        background: none;
        border: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
    }
    
    .ts-wrapper.plugin-remove_button .item .remove {
        border: none;
        padding: 0 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
    }
    
    .ts-wrapper.plugin-remove_button .item .remove:hover {
        background-color: hsl(var(--b3));
    }

    /* Enhanced TomSelect Styles */
    .ts-dropdown-custom {
        @apply fixed z-[100] w-full max-w-lg mx-auto rounded-xl shadow-xl border border-base-300;
        @apply bg-base-100/95 backdrop-blur-md;
        @apply animate-in fade-in slide-in-from-top-2 duration-200;
        max-height: min(400px, 60vh);
        transform-origin: top center;
    }

    .ts-dropdown-custom .optgroup {
        @apply border-none p-0;
    }

    .ts-dropdown-custom .option {
        @apply transition-all duration-200 px-3 py-2 hover:pl-4;
    }

    .ts-dropdown-custom .option:hover {
        @apply bg-base-200/50;
    }

    .ts-dropdown-custom .option.active {
        @apply bg-primary/10 text-primary;
    }

    .ts-dropdown-custom .no-results {
        @apply p-8 text-center text-base-content/70;
    }

    .ts-wrapper.focus .ts-control {
        @apply border-primary/30 ring-2 ring-primary/20;
    }

    /* Skills Modal Styles */
    .modal-box {
        @apply relative max-h-[90vh] w-11/12 max-w-4xl mx-auto;
        @apply bg-base-100/95 backdrop-blur-md rounded-2xl;
        @apply shadow-2xl shadow-base-300/20;
        @apply flex flex-col;
        @apply p-4;
        @apply border border-base-200/50;
    }

    .modal-box .modal-header {
        @apply flex items-center justify-between;
        @apply pb-3 mb-3 border-b border-base-200/50;
        @apply sticky top-0 bg-base-100/95 backdrop-blur-md z-30;
    }

    .modal-box .modal-content {
        @apply flex-1 overflow-y-auto overscroll-contain;
        @apply -mx-4 px-4;
        @apply scroll-smooth;
    }

    .modal-box .modal-action {
        @apply sticky bottom-0 bg-base-100/95 backdrop-blur-md;
        @apply mt-3 pt-3 border-t border-base-200/50;
        @apply flex items-center justify-between;
        @apply -mx-4 px-4 pb-0;
    }

    /* Quick Letters Navigation */
    .quick-letters-nav {
        @apply w-10 flex flex-col gap-0.5 py-2 pl-0.5 pr-1.5;
        @apply sticky top-0 self-start;
        @apply select-none touch-none;
        height: calc(100vh - 12rem);
    }

    .letter-nav-button {
        @apply w-7 h-5 rounded;
        @apply flex items-center justify-center;
        @apply text-[10px] font-medium;
        @apply text-base-content/50 hover:text-primary;
        @apply transition-all duration-75;
        transform-origin: center right;
    }

    .letter-nav-button:active {
        @apply scale-125 text-primary;
    }

    .letter-nav-button.active {
        @apply text-primary font-bold scale-110;
    }

    /* Letter Preview Bubble */
    .letter-bubble {
        @apply fixed z-[100] pointer-events-none;
        @apply bg-primary text-primary-content;
        @apply w-14 h-14 rounded-xl;
        @apply flex items-center justify-center;
        @apply text-2xl font-black;
        @apply shadow-lg shadow-base-300/20;
        @apply opacity-0 scale-90;
        @apply transition-all duration-75;
        transform-origin: center right;
        right: 3rem;
        top: 50vh;
        transform: translateY(-50%) scale(0.9);
    }

    .letter-bubble.visible {
        @apply opacity-100 scale-100;
        animation: bubblePop 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes bubblePop {
        0% { transform: translateY(-50%) scale(0.8); }
        50% { transform: translateY(-50%) scale(1.1); }
        100% { transform: translateY(-50%) scale(1); }
    }

    /* Skill Groups */
    .skill-group {
        @apply mb-8 last:mb-4;
        scroll-margin-top: 1rem;
    }

    .skill-group-header {
        @apply sticky top-0 py-2 z-20;
        @apply bg-gradient-to-b from-base-100 via-base-100/95 to-transparent;
    }

    .skill-group-header span {
        @apply text-4xl font-black opacity-10;
        @apply transition-all duration-300;
        background: linear-gradient(to bottom, hsl(var(--p)), transparent);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    .skill-group.active .skill-group-header span {
        @apply opacity-20 scale-105;
    }

    /* Skill Grid */
    .skill-grid {
        @apply grid gap-2 pt-1.5;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }

    /* Skill Cards */
    .skill-card {
        @apply flex items-center gap-2.5 p-2.5 rounded-lg;
        @apply border border-base-200/80 hover:border-primary/30;
        @apply bg-base-100/50 hover:bg-base-200/30;
        @apply transition-all duration-200;
        @apply relative overflow-hidden;
        @apply active:scale-95;
    }

    .skill-card .icon-wrapper {
        @apply w-8 h-8 flex items-center justify-center;
        @apply bg-base-200/80 rounded-md;
        @apply transition-all duration-200;
    }

    .skill-card:hover .icon-wrapper {
        @apply scale-110 rotate-3 bg-base-200;
    }

    .skill-card .skill-name {
        @apply text-sm font-medium;
        @apply transition-colors duration-200;
    }

    .skill-card .check-indicator {
        @apply absolute right-2 text-primary;
        @apply opacity-0 scale-75;
        @apply transition-all duration-200;
    }

    .skill-card.selected {
        @apply border-primary/50 bg-primary/5;
        @apply hover:bg-primary/10 hover:border-primary;
        @apply shadow-sm shadow-primary/10;
    }

    .skill-card.selected .skill-name {
        @apply text-primary font-semibold;
    }

    .skill-card.selected .icon-wrapper {
        @apply bg-primary/10;
    }

    .skill-card.selected .check-indicator {
        @apply opacity-100 scale-100;
    }

    /* Mobile Optimizations */
    @media (max-width: 640px) {
        .quick-letters-nav {
            @apply h-10 flex-row overflow-x-auto overflow-y-hidden;
            @apply w-full sticky top-0 bg-base-100/95 backdrop-blur-sm z-10;
            @apply px-3 py-1.5;
            height: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            -webkit-overflow-scrolling: touch;
        }

        .quick-letters-nav::-webkit-scrollbar {
            display: none;
        }

        .letter-nav-button {
            @apply min-w-[1.75rem] h-7 rounded;
            @apply flex-shrink-0;
            @apply text-[10px] font-medium;
        }

        .skill-grid {
            @apply grid-cols-1;
        }

        .modal-content {
            height: calc(85vh - 8rem);
        }

        .letter-bubble {
            @apply w-10 h-10 text-xl;
            right: 1rem;
        }
    }
}

@tailwind utilities;

@layer utilities {
    /* Animation Utilities */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }

    .animate-scale-in {
        animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Transform Utilities */
    .transition-gpu {
        @apply transform-gpu transition-all duration-200;
        backface-visibility: hidden;
        transform-style: preserve-3d;
        will-change: transform, opacity;
    }

    .backface-hidden {
        backface-visibility: hidden;
        transform-style: preserve-3d;
    }

    /* Smooth scroll utility */
    .smooth-scroll {
        scroll-behavior: smooth;
        transition: scroll-position 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overscroll-behavior: none;
    }
}

/* Keyframes */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(1rem);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from { 
        opacity: 0;
        transform: scale(0.95);
    }
    to { 
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes modal-enter {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}
