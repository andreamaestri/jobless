@tailwind base;

@layer base {
    /* Work Sans font loading */
    @font-face {
        font-family: 'Work Sans Variable';
        font-style: normal;
        font-display: swap;
        font-weight: 100 900;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/work-sans:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
        unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
    }

    /* Enhanced scrollbar styles */
    * {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--p)/0.3) transparent;
    }

    *::-webkit-scrollbar {
        @apply w-1.5 h-1.5;
    }

    *::-webkit-scrollbar-track {
        @apply bg-transparent;
    }

    *::-webkit-scrollbar-thumb {
        @apply bg-primary/30 rounded-full hover:bg-primary/50 transition-colors;
    }

    /* Base layout */
    html, body {
        @apply h-full;
        /* Remove overflow-hidden to allow scrolling */
    }

    main {
        @apply h-full overflow-y-auto;
    }

    /* Ensure clickable elements work */
    button, a, input, select, textarea {
        @apply relative z-10;
    }
}

@tailwind components;

@layer components {
    /* Enhanced Calendar Component */
    .fc {
        --fc-border-color: hsl(var(--b3));
        --fc-button-text-color: hsl(var(--pc));
        --fc-button-bg-color: hsl(var(--p));
        --fc-button-border-color: hsl(var(--p));
        --fc-button-hover-bg-color: hsl(var(--pf));
        --fc-button-hover-border-color: hsl(var(--pf));
        --fc-button-active-bg-color: hsl(var(--pf));
        --fc-button-active-border-color: hsl(var(--pf));
    }

    /* Enhanced Navigation */
    .nav-item {
        @apply relative overflow-visible transform-gpu transition-all duration-300;
        @apply hover:ring-2 hover:ring-primary/50 hover:ring-offset-1 hover:ring-offset-base-100 hover:scale-105;
        @apply focus:outline-none focus:ring-2 focus:ring-primary;
        transform-style: preserve-3d;
        backface-visibility: hidden;
    }

    .nav-item::after {
        content: '';
        @apply absolute bottom-0 left-0 right-0 h-0.5 bg-current transform scale-x-0 transition-transform duration-300;
    }

    .nav-item:hover {
        @apply ring-2 ring-primary/50 ring-offset-1 ring-offset-base-100 scale-105;
    }

    /* Theme Preview */
    .theme-preview {
        @apply w-6 h-6 rounded-full border-2 border-base-content/20 relative;
    }

    .theme-preview::before {
        content: '';
        @apply absolute inset-[2px] rounded-full bg-gradient-to-tr from-primary to-secondary;
    }

    /* User Avatar */
    .user-avatar::after {
        content: '';
        @apply absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-success border-2 border-base-200;
    }

    /* Table Styles */
    .table-container {
        @apply relative overflow-y-auto touch-pan-y;
        /* Remove max-height restriction if it causes issues */
        max-height: none;
    }

    .table-pin-rows thead tr {
        @apply sticky top-0 z-10 backdrop-blur-lg bg-base-100/95;
    }

    /* Refined Tom Select Styles */
    .ts-wrapper {
        @apply relative w-full;
    }

    .ts-control {
        @apply min-h-[3rem] px-3 py-2 bg-base-100 border border-base-300 rounded-xl;
        @apply hover:border-primary/50 focus-within:border-primary focus-within:ring-1 focus-within:ring-primary/50;
        @apply transition duration-200;
    }

    .ts-dropdown {
        @apply fixed mt-2 p-2 rounded-xl border border-base-300;
        @apply bg-base-100/95 backdrop-blur-sm shadow-lg;
        @apply max-h-[min(400px,40vh)] overflow-y-auto;
        @apply invisible opacity-0 scale-95 transition-all duration-200;
        @apply z-50;
        position: absolute !important;
        /* Adjust z-index to ensure dropdowns appear above other elements */
        z-index: 1000 !important;
    }

    .ts-dropdown.active {
        @apply visible opacity-100 scale-100;
    }

    .ts-wrapper.multi .ts-control {
        @apply min-h-[42px] p-2 rounded-xl bg-base-100 border-base-300 opacity-70 transition-opacity duration-200;
    }

    .ts-wrapper.focus .ts-control {
        @apply border-primary ring-1 ring-primary opacity-100;
    }

    .ts-dropdown {
        @apply rounded-xl p-2 border border-base-300 bg-base-100;
        @apply shadow-lg;
        max-height: min(400px, 40vh) !important;
    }

    .ts-dropdown .option {
        @apply rounded-lg px-3 py-2;
    }

    .ts-dropdown .active {
        @apply bg-primary text-primary-content;
    }

    .ts-wrapper.multi .ts-control > div {
        @apply bg-primary text-primary-content rounded-lg px-2 py-0.5 m-0.5;
    }

    .ts-wrapper.plugin-remove_button .item .remove {
        @apply rounded-r-lg px-1.5;
    }

    .ts-dropdown-content {
        @apply overflow-y-auto;
        max-height: min(400px, 40vh) !important;
    }

    .ts-dropdown {
        @apply bg-base-100 border border-base-300 rounded-md shadow-lg max-h-60 overflow-y-auto;
    }

    .ts-dropdown .option {
        @apply flex items-center gap-2 py-2 px-3 cursor-pointer;
    }

    .ts-dropdown .option.active {
        @apply bg-primary text-white;
    }

    .ts-dropdown .option:hover {
        @apply bg-primary/20;
    }

    .ts-control {
        @apply border border-base-300 rounded-xl;
    }

    .ts-wrapper.multi .ts-control {
        @apply flex flex-wrap;
    }

    .ts-wrapper.focus .ts-control {
        @apply ring-2 ring-primary/50 ring-offset-1;
    }

    .ts-wrapper.plugin-remove_button .item .remove {
        @apply text-red-500 hover:text-red-700;
    }

    /* Tom Select Enhanced Styles */
    .ts-wrapper.multi .ts-control > div {
        @apply bg-base 100 text-base-content border border-base-300 rounded-lg px-3 py-1.5 m-0.5;
        @apply flex items-center gap-2 hover:border-primary transition-colors duration-200;
    }

    .ts-wrapper.multi .ts-control > div.active {
        @apply bg-primary/10 border-primary;
    }

    .ts-wrapper.multi .ts-control > div iconify-icon {
        @apply text-lg opacity-70;
    }

    .ts-wrapper.plugin-remove_button .item .remove {
        @apply border-l border-base-300 ml-2 pl-2;
        @apply hover:text-error transition-colors duration-200;
    }

    .ts-wrapper .ts-control {
        @apply !min-h-[3rem] p-1;
    }

    .ts-dropdown .option {
        @apply rounded-lg px-4 py-2.5 hover:bg-base-200 transition-colors duration-200;
    }

    .ts-dropdown .active {
        @apply bg-primary/10 text-primary;
    }

    .ts-dropdown .option:hover iconify-icon {
        @apply scale-110 transition-transform duration-200;
    }

    /* Enhanced Tom Select Styles */
    .ts-wrapper.multi .ts-control > div {
        @apply bg-base-100 text-base-content border border-base-300 rounded-full px-3 py-1.5 m-0.5;
        @apply flex items-center gap-2 hover:border-primary hover:bg-primary/5 transition-all duration-200;
        @apply shadow-sm;
    }

    .ts-wrapper.multi .ts-control > div.active {
        @apply bg-primary/10 border-primary shadow-md;
    }

    .ts-wrapper.multi .ts-control > div iconify-icon {
        @apply text-lg opacity-80 transition-transform duration-200;
    }

    .ts-wrapper.plugin-remove_button .item .remove {
        @apply border-l border-base-300/50 ml-2 pl-2;
        @apply hover:text-error transition-colors duration-200;
        @apply opacity-60 hover:opacity-100;
    }

    /* Dropdown categories styling */
    .ts-dropdown .optgroup-header {
        @apply text-xs font-semibold uppercase tracking-wider text-base-content/70 px-4 py-2;
        @apply border-b border-base-200/50;
    }

    .ts-dropdown .optgroup .option {
        @apply pl-6;
    }

    .ts-dropdown .no-results {
        @apply p-4 text-sm text-base-content/70 text-center;
        @apply border-t border-base-200/50;
    }

    /* Tag animation */
    .ts-wrapper.multi .ts-control > div {
        animation: tag-enter 0.2s ease-out;
    }

    @keyframes tag-enter {
        from {
            opacity: 0;
            transform: scale(0.9) translateX(-10px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateX(0);
        }
    }

    /* Enhanced Form Actions */
    .form-actions-sticky {
        @apply sticky bottom-0 z-50;
        /* Remove fixed positioning that might block interaction */
    }

    /* Page Transitions */
    .page-transition-wrapper {
        @apply relative min-h-full;
    }

    .page-enter {
        @apply transition-all duration-300 ease-out;
        animation: page-enter 0.3s ease-out;
    }

    .page-leave {
        @apply transition-all duration-200 ease-in;
        animation: page-leave 0.2s ease-in;
    }

    /* Form Transitions */
    .form-section {
        @apply transition-all duration-300 ease-out;
        animation: section-enter 0.4s ease-out;
    }

    .form-actions {
        @apply transition-all duration-300;
        animation: slide-up 0.3s ease-out;
    }

    /* Tom Select Clean Interface */
    .ts-wrapper {
        @apply relative;
    }
    
    .ts-control {
        @apply min-h-[42px] px-3 py-2 bg-base-100 border border-base-300 rounded-xl;
        @apply flex flex-wrap items-center gap-2;
        @apply cursor-pointer hover:border-primary/50 transition-colors duration-200;
    }

    /* Hide original select */
    .ts-wrapper select {
        @apply hidden;
    }

    /* Empty state with placeholder */
    .ts-control:empty::before {
        content: attr(data-placeholder);
        @apply text-base-content/50 block pointer-events-none;
    }

    /* Dropdown styling */
    .ts-dropdown {
        @apply fixed mt-1 py-2 rounded-xl border border-base-300;
        @apply bg-base-100/95 backdrop-blur-sm shadow-lg;
        @apply max-h-[300px] overflow-y-auto;
        @apply invisible opacity-0 transition-all duration-200;
        @apply z-50;
    }

    .ts-dropdown.active {
        @apply visible opacity-100;
        animation: dropdown-enter 0.2s ease-out;
    }

    /* Hide the input box */
    .ts-wrapper.multi .ts-control input {
        @apply opacity-0 absolute -left-[10000px];
        width: 4px !important;
    }

    /* Clean empty state */
    .ts-wrapper.multi .ts-control:empty::before {
        content: attr(data-placeholder);
        @apply text-base-content/50 block;
    }

    /* Dropdown styling */
    .ts-dropdown {
        @apply mt-2 p-2 rounded-xl border border-base-300 bg-base-100/95;
        @apply backdrop-blur-sm shadow-lg;
        @apply max-h-[300px] overflow-y-auto;
        @apply invisible opacity-0 transition-all duration-200;
    }

    .ts-dropdown.active {
        @apply visible opacity-100;
        animation: dropdown-enter 0.2s ease-out;
    }

    /* Category headers */
    .ts-dropdown .optgroup-header {
        @apply text-xs font-semibold uppercase tracking-wider;
        @apply text-base-content/70 px-3 py-2 sticky top-0;
        @apply bg-base-100/95 backdrop-blur-sm border-b border-base-200/50;
    }

    /* Options */
    .ts-dropdown .option {
        @apply px-3 py-2 rounded-lg my-0.5 cursor-pointer;
        @apply hover:bg-primary/10 transition-colors duration-150;
        @apply flex items-center gap-3;
    }

    .ts-dropdown .active {
        @apply bg-primary/20 text-primary-content;
    }

    /* Selected tags */
    .ts-wrapper.multi .ts-control > div {
        @apply bg-base-100 text-base-content rounded-full px-3 py-1;
        @apply border border-base-300 flex items-center gap-2;
        @apply hover:border-primary/50 transition-all duration-200;
        animation: tag-enter 0.2s ease-out;
    }

    .ts-wrapper.multi .item iconify-icon {
        @apply text-lg opacity-80;
    }

    /* Remove button */
    .ts-wrapper.plugin-remove_button .item .remove {
        @apply border-l border-base-300/50 ml-2 pl-2;
        @apply text-base-content/50 hover:text-error;
        @apply transition-colors duration-200;
    }

    @keyframes dropdown-enter {
        from {
            opacity: 0;
            transform: translateY(-4px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Modal-style dropdown */
    .ts-dropdown {
        @apply fixed top-0 left-0 right-0 bottom-0 sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2;
        @apply w-full h-full sm:w-[90vw] sm:h-auto sm:max-w-lg sm:max-h-[80vh] overflow-y-auto;
        @apply bg-base-100 sm:rounded-2xl shadow-2xl border-0 sm:border border-base-300;
        @apply invisible opacity-0 sm:scale-95 transition-all duration-200;
        @apply z-[100];
    }

    /* Backdrop */
    .ts-dropdown-backdrop {
        @apply fixed inset-0 bg-base-300/50 backdrop-blur-sm;
        @apply invisible opacity-0 transition-opacity duration-200;
        @apply z-[99];
    }

    .ts-dropdown-backdrop.active {
        @apply visible opacity-100;
    }

    /* Dropdown header */
    .ts-dropdown-header {
        @apply sticky top-0 p-4 border-b border-base-200 bg-base-100/95 backdrop-blur-sm;
        @apply flex items-center justify-between;
    }

    /* Search input */
    .ts-dropdown-header input {
        @apply w-full px-4 py-2 bg-base-200/50 rounded-xl;
        @apply border border-base-300 focus:border-primary;
        @apply placeholder:text-base-content/50;
    }

    /* Close button */
    .ts-dropdown-close {
        @apply absolute top-3 right-3 p-2 text-base-content/50;
        @apply hover:text-base-content transition-colors duration-200;
    }

    /* Content sections */
    .ts-dropdown-content {
        @apply p-4 divide-y divide-base-200;
    }

    /* Category headers */
    .optgroup-header {
        @apply text-sm font-semibold text-base-content/70;
        @apply py-3 px-2;
    }

    /* Options */
    .option {
        @apply px-3 py-2 rounded-xl my-1 cursor-pointer;
        @apply hover:bg-primary/10 transition-colors duration-150;
    }

    .option.active {
        @apply bg-primary/20 text-primary;
    }

    /* Hide scrollbar when modal is inactive */
    .ts-dropdown:not(.active) {
        @apply overflow-hidden;
    }

    /* Skill Modal Styles */
    .skill-group {
        scroll-margin-top: 0;
    }

    .skill-group .checkbox:checked ~ div {
        @apply bg-primary/5 ring-1 ring-primary/20;
    }

    .skill-group .checkbox:checked ~ div .w-14 {
        @apply bg-primary/10;
    }

    .skill-group label.group {
        @apply hover:-translate-y-0.5 hover:shadow-lg;
    }

    .skill-group label.group:active {
        @apply translate-y-0 shadow-md;
    }

    /* Letter navigation */
    .modal-box .btn-sm {
        @apply transition-all duration-200;
    }

    .modal-box .btn-sm.btn-primary {
        @apply bg-primary/20 border-primary/20 text-primary;
        @apply hover:bg-primary hover:text-primary-content hover:border-primary;
        @apply scale-110 shadow-md;
    }

    /* Modal scroll behavior */
    .modal-box .overflow-y-auto {
        scrollbar-gutter: stable;
    }

    .modal-box .sticky {
        @apply transition-shadow duration-200;
    }

    /* Disable modal animations when scrolling */
    .modal-box .overflow-y-auto:active .skill-group label.group {
        @apply transition-none transform-none hover:transform-none;
    }

    /* Skill Group Styles */
    .skill-group {
        scroll-margin-top: 0;
        @apply touch-pan-y;
    }

    .skill-group .sticky {
        @apply bg-base-100 border-b border-base-200/10;
        transform-style: preserve-3d;
        
        &::after {
            content: '';
            @apply absolute left-0 right-0 -bottom-6 h-6;
            background: linear-gradient(to bottom, var(--b1) 0%, transparent 100%);
            pointer-events: none;
        }
    }

    /* Quick jump buttons */
    .modal-box .btn-sm {
        @apply min-w-[2.5rem] font-medium transition-all duration-200;
        @apply hover:scale-110 focus:scale-110;
        @apply focus:ring-2 focus:ring-primary/50 focus:outline-none;
    }

    .modal-box .btn-sm.btn-primary {
        @apply bg-primary/10 border-primary/20 text-primary;
        @apply hover:bg-primary/20 hover:border-primary/30;
        @apply shadow-sm;
    }

    /* Hover effects */
    .skill-group label.group {
        @apply hover:-translate-y-0.5 hover:shadow-lg;
    }

    .skill-group label.group:active {
        @apply translate-y-0 shadow-md;
    }

    /* Checked state */
    .skill-group .checkbox:checked ~ div {
        @apply bg-primary/5 ring-1 ring-primary/20;
    }

    .skill-group .checkbox:checked ~ div .w-14 {
        @apply bg-primary/10;
    }

    /* Touch-friendly hover states */
    @media (hover: none) {
        .skill-group label.group {
            @apply active:bg-base-200 active:shadow-md hover:transform-none;
        }
        
        .skill-group label.group:active {
            @apply scale-[0.98];
        }
    }

    /* Improved modal scrolling */
    .modal-box .overflow-y-auto {
        @apply overscroll-contain;
        -webkit-overflow-scrolling: touch;
    }

    /* Quick jump buttons */
    .quick-jump-btn {
        @apply relative font-medium;
        @apply hover:scale-110 hover:shadow-lg focus:scale-110 focus:shadow-lg;
        @apply active:scale-95 active:shadow-md;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/50;
        @apply transition-all duration-200;
    }

    .quick-jump-btn.btn-primary {
        @apply bg-primary/20 border-primary/20 text-primary;
        @apply hover:bg-primary/30 hover:border-primary/30;
        @apply shadow-lg;
    }

    @media (hover: none) {
        .quick-jump-btn {
            @apply active:bg-primary/20 active:text-primary;
            @apply touch-pan-x touch-pan-y;
        }
    }

    /* Improved modal scrolling with letter navigation */
    .modal-box .overflow-y-auto {
        @apply overscroll-contain;
        -webkit-overflow-scrolling: touch;
        scroll-padding-bottom: 6rem;
    }

    @media (min-width: 640px) {
        .modal-box .overflow-y-auto {
            scroll-padding-bottom: 2rem;
        }
    }

    /* Quick jump navigation improvements */
    .quick-jump-btn {
        @apply relative font-medium;
        @apply hover:bg-primary/10 hover:text-primary;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/50;
        @apply transition-all duration-200 ease-out;
    }

    .quick-jump-btn.btn-primary {
        @apply bg-primary text-primary-content;
        @apply hover:bg-primary hover:text-primary-content;
        @apply scale-110 shadow-lg ring-2 ring-primary/50;
    }

    /* Hide scrollbar but keep functionality */
    .hide-scrollbar {
        scrollbar-width: none;
        -ms-overflow-style: none;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Container animations */
    @media (min-width: 1024px) {
        .quick-jump-btn {
            @apply opacity-70 hover:opacity-100;
            @apply hover:-translate-y-0.5 hover:shadow-md;
            @apply active:translate-y-0 active:scale-95;
        }

        .quick-jump-btn.btn-primary {
            @apply opacity-100 translate-y-0;
        }
    }

    /* Mobile touch optimization */
    @media (max-width: 1023px) {
        .quick-jump-btn {
            @apply active:scale-95;
            scroll-snap-align: center;
            scroll-snap-stop: always;
        }

        nav:has(.quick-jump-btn) {
            scroll-snap-type: x mandatory;
            scroll-padding: 0.5rem;
        }
    }

    /* Quick jump navigation improvements */
    .quick-jump-btn {
        @apply relative font-medium;
        @apply hover:bg-primary/10 hover:text-primary active:scale-95;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/50;
        @apply transition-all duration-200;
    }

    .quick-jump-btn.btn-primary {
        @apply bg-primary text-primary-content border-primary;
        @apply hover:bg-primary hover:text-primary-content;
        @apply scale-110 shadow-lg;
    }

    /* Hide scrollbar but keep functionality */
    .hide-scrollbar {
        scrollbar-width: none;
        -ms-overflow-style: none;
        scroll-snap-type: x mandatory;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Container animations */
    @media (min-width: 1024px) {
        .quick-jump-btn {
            @apply opacity-60 hover:opacity-100;
        }

        .quick-jump-btn.btn-primary {
            @apply opacity-100;
        }
    }

    /* Mobile touch optimization */
    @media (max-width: 1023px) {
        .quick-jump-btn {
            scroll-snap-align: center;
            scroll-snap-stop: always;
        }
    }

    /* Mobile optimization */
    @media (max-width: 1023px) {
        .quick-jump-btn {
            @apply text-sm;
            scroll-snap-align: center;
        }

        /* Horizontal scroll snap */
        .quick-jump-btn:first-child {
            scroll-margin-left: 0.5rem;
        }
        
        .quick-jump-btn:last-child {
            scroll-margin-right: 0.5rem;
        }

        /* Container for mobile letters */
        div::-webkit-scrollbar {
            @apply h-0 w-0;
        }

        div::-webkit-scrollbar-track {
            @apply bg-transparent;
        }
    }

    /* Skill Modal Search Transitions */
    .skill-group .sticky {
        @apply transition-[height,opacity,margin] duration-200 ease-out;
    }

    .quick-jump-container {
        @apply transition-opacity duration-200 ease-out;
    }

    /* Modal transitions */
    .modal-box .overflow-y-auto {
        @apply transition-all duration-300 ease-out;
    }

    /* Improved Quick Jump Navigation */
    .quick-jump-container {
        @apply bg-base-100/50 backdrop-blur-sm rounded-2xl shadow-lg border border-base-300;
        @apply p-1;
        max-height: min(600px, 80vh);
    }

    .quick-jump-wave {
        @apply gap-0.5;
        max-height: min(600px, 70vh);
    }

    .quick-jump-btn {
        @apply transition-all duration-200 ease-out;
        @apply hover:bg-primary/10 hover:text-primary;
        @apply flex items-center justify-center;
        transform-origin: center;
    }

    /* Wave effect for quick jump buttons */
    .quick-jump-wave:hover .quick-jump-btn {
        opacity: 0.5;
    }

    .quick-jump-wave .quick-jump-btn:hover {
        @apply opacity-100 bg-primary/20;
        transform: scale(1.2);
    }

    .quick-jump-wave .quick-jump-btn:hover ~ .quick-jump-btn {
        transform: translateX(5px);
    }

    /* Neighbor buttons wave effect */
    .quick-jump-wave .quick-jump-btn:hover + .quick-jump-btn {
        transform: scale(1.1);
    }

    .quick-jump-wave .quick-jump-btn:hover + .quick-jump-btn + .quick-jump-btn {
        transform: scale(1.05);
    }

    /* Active state */
    .quick-jump-btn.active {
        @apply bg-primary text-primary-content;
        transform: scale(1.2);
    }

    /* Adjust modal content to account for quick jump */
    .modal-box .overflow-y-auto {
        @apply pr-16;  /* Make space for quick jump */
    }

    /* Hide scrollbar for quick jump container */
    .quick-jump-wave {
        @apply overflow-hidden hover:overflow-y-auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .quick-jump-wave::-webkit-scrollbar {
        display: none;
    }

    /* Responsive adjustments */
    @media (max-height: 600px) {
        .quick-jump-container {
            @apply bg-transparent border-none shadow-none;
            max-height: 70vh;
        }
        
        .quick-jump-btn {
            @apply w-6 h-6 text-xs;
        }
    }

    /* Quick Jump iOS Style */
    .quick-letters-list {
        @apply flex flex-col items-center;
        @apply py-6 px-1;
        @apply relative;
        height: calc(100vh - 200px);
    }

    .quick-letter {
        @apply w-6 h-6 flex items-center justify-center;
        @apply text-[11px] font-semibold text-base-content/40;
        @apply transition-transform transition-opacity duration-300 ease-out;
        transform-origin: center;
        letter-spacing: 0.02em;
        
        /* Create larger hit area while keeping visual size small */
        padding: 12px;
        margin: -8px 0;
    }

    .quick-letter:hover {
        @apply text-primary font-bold;
        opacity: 1;
        transform: scale(1.4);
        transition-duration: 300ms;
    }

    .quick-letter:hover + .quick-letter {
        opacity: 0.8;
        transform: scale(1.2);
        transition-duration: 250ms;
    }

    .quick-letter:hover ~ .quick-letter {
        opacity: 0.6;
        transform: scale(1.1);
        transition-duration: 200ms;
    }

    .quick-letter:not(:hover) {
        transform: scale(1);
        opacity: 0.4;
        transition: transform 300ms ease-out, opacity 300ms ease-out;
    }

    /* Optional: Smooth transition when moving the mouse away */
    .quick-letter {
        transition: transform 300ms ease-out, opacity 300ms ease-out;
    }

    /* Preview bubble refinements */
    #letter-preview {
        @apply -left-16 bg-base-100/95 backdrop-blur-lg;
        box-shadow: 
            0 4px 6px -1px rgb(0 0 0 / 0.1),
            0 2px 4px -2px rgb(0 0 0 / 0.1),
            0 0 0 1px hsl(var(--p) / 0.1);
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            @apply py-2 px-3;  /* Larger touch targets */
            margin: -4px 0;
        }
        
        .quick-letters-list {
            @apply py-4;
        }
    }

    /* Quick Jump iOS Style */
    .quick-jump-container {
        @apply fixed right-0 top-0 bottom-0 z-40 flex items-center;
        @apply pr-2;
        /* Ensure it stretches vertically */
        height: 100%;
    }

    .quick-letters-list {
        @apply flex flex-col items-center;
        @apply py-4;
    }

    .quick-letter {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-sm font-medium text-base-content/60;
        @apply transition-transform duration-300 ease-out;
        @apply cursor-pointer select-none;
        transform-origin: center;
        /* Remove background and border */
        background: none;
        border: none;
        /* Add margin for spacing */
        margin: 4px 0;
    }

    /* MacOS Dock Effect */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(1.5);
        z-index: 10;
    }

    .quick-letters-list:hover .quick-letter:not(:hover) {
        transform: scale(1);
        opacity: 0.7;
    }

    /* Optional: Smooth transition when moving between letters */
    .quick-letter {
        transition: transform 0.2s ease, opacity 0.2s ease;
    }

    /* Active state */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(1.5);
    }

    /* Preview bubble refinements */
    #letter-preview {
        @apply -left-16 bg-base-100/95 shadow-lg;
        filter: drop-shadow(0 4px 12px rgb(0 0 0 / 0.1));
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            @apply h-8 text-sm;
        }
        
        .quick-letters-list {
            @apply py-2 px-1;
        }
    }

    /* QuickLetters Animation */

    :root {
        --lens-width: 5ch; /* Number of characters the lens affects */
        --max-zoom: 1.5;    /* Maximum scale factor */
        --animation-speed: 10s; /* Duration of one animation cycle */
    }

    .quick-letters {
        position: relative;
        display: inline-block;
        overflow: hidden;
    }

    .quick-letter {
        display: inline-block;
        transition: transform 0.3s ease;
    }

    .lens-overlay {
        position: absolute;
        top: 0;
        left: -var(--lens-width);
        width: var(--lens-width);
        height: 100%;
        background: linear-gradient(
            to right,
            transparent 0%,
            rgba(255, 255, 255, 0.5) 50%,
            transparent 100%
        );
        animation: lens-wave var(--animation-speed) linear infinite;
    }

    @keyframes lens-wave {
        0% {
            left: -var(--lens-width);
        }
        100% {
            left: 100%;
        }
    }

    .quick-letters:hover .quick-letter {
        transform: scale(1);
    }

    .quick-letters:hover .quick-letter.in-focus {
        transform: scale(var(--max-zoom));
    }

    .quick-letters .quick-letter {
        /* Initial state */
        transform: scale(1);
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        :root {
            --lens-width: 3ch;
            --max-zoom: 1.3;
            --animation-speed: 8s;
        }
    }

    /* Adjustable Parameters */
    .quick-letters {
        --lens-width: 5ch;
        --max-zoom: 1.5;
        --animation-speed: 10s;
    }

    /* QuickLetters Animation with Wave Effect */
    .quick-letters-list {
        @apply flex flex-col items-center gap-1;
        @apply py-4 px-1;
        @apply relative;
        height: calc(100vh - 200px);
        pointer-events: auto;
    }

    .quick-letter {
        @apply w-6 h-6 flex items-center justify-center;
        @apply text-[11px] font-semibold text-base-content/40;
        @apply transition-all duration-200 ease-out;
        transform-origin: center;
        letter-spacing: 0.02em;
        padding: 12px;
        margin: -8px 0;
        position: relative;
        z-index: 1;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
        cursor: pointer;
    }

    /* Wave Animation Effect */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(1.8);
        z-index: 2;
        opacity: 1;
    }

    /* Previous siblings (letters above) */
    .quick-letter:hover ~ .quick-letter {
        transform: scale(0.9);
    }

    /* Immediate previous/next siblings */
    .quick-letter:hover + .quick-letter {
        transform: scale(1.4);
        opacity: 0.8;
    }

    .quick-letter:has(+ .quick-letter:hover) {
        transform: scale(1.4);
        opacity: 0.8;
    }

    /* Second-level siblings */
    .quick-letter:hover + .quick-letter + .quick-letter {
        transform: scale(1.2);
        opacity: 0.6;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter:hover) {
        transform: scale(1.2);
        opacity: 0.6;
    }

    /* Third-level siblings */
    .quick-letter:hover + .quick-letter + .quick-letter + .quick-letter {
        transform: scale(1.1);
        opacity: 0.5;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter + .quick-letter:hover) {
        transform: scale(1.1);
        opacity: 0.5;
    }

    /* Reset state */
    .quick-letter {
        transform: scale(1);
        opacity: 0.6;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    .quick-letters-list:hover .quick-letter:not(:hover) {
        transform: scale(1);
        opacity: 0.4;
    }

    /* Active state */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(1.6);
        opacity: 1;
        z-index: 3;
    }

    /* Responsive adjustments */
    @media (max-height: 600px) {
        .quick-letters-list {
            @apply py-2;
        }
        
        .quick-letter {
            @apply w-5 h-5 text-[10px];
            padding: 8px;
            margin: -4px 0;
        }
    }

    /* Enhanced macOS Dock-style QuickLetters */
    .quick-letters-list {
        @apply flex flex-col items-center gap-1;
        @apply py-4 px-1 relative;
        height: calc(100vh - 200px);
        pointer-events: auto;
    }

    .quick-letter {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-sm font-medium text-base-content/70;
        @apply select-none cursor-pointer;
        transform-origin: center;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        will-change: transform, opacity;
        position: relative;
        z-index: 1;
    }

    /* Improved MacOS Dock Animation Effect */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(2);
        opacity: 1;
        z-index: 10;
    }

    /* Previous siblings (closer = larger scale) */
    .quick-letter:has(+ .quick-letter:hover) {
        transform: scale(1.7);
        opacity: 0.9;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter:hover) {
        transform: scale(1.4);
        opacity: 0.8;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter + .quick-letter:hover) {
        transform: scale(1.2);
        opacity: 0.7;
    }

    /* Next siblings (closer = larger scale) */
    .quick-letter:hover + .quick-letter {
        transform: scale(1.7);
        opacity: 0.9;
    }

    .quick-letter:hover + .quick-letter + .quick-letter {
        transform: scale(1.4);
        opacity: 0.8;
    }

    .quick-letter:hover + .quick-letter + .quick-letter + .quick-letter {
        transform: scale(1.2);
        opacity: 0.7;
    }

    /* Active state enhancement */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(1.8);
        opacity: 1;
        z-index: 5;
    }

    /* Container hover effect */
    .quick-letters-list:hover .quick-letter {
        opacity: 0.6;
    }

    .quick-letters-list:hover .quick-letter:hover {
        opacity: 1;
    }

    /* Smooth transitions */
    .quick-letter {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* Container padding animation */
    .quick-letters-list {
        transition: padding 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .quick-letters-list:hover {
        @apply py-8;
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            @apply py-4 text-base;
        }
        
        .quick-letters-list {
            @apply py-2 px-2;
        }
        
        .quick-letters-list:hover {
            @apply py-2;
        }
        
        .quick-letter:active {
            transform: scale(1.5);
            @apply text-primary font-bold;
        }
    }

    /* Responsive design */
    @media (max-height: 640px) {
        .quick-letter {
            @apply w-6 h-6 text-xs;
            margin: 1px 0;
        }
        
        .quick-letters-list:hover {
            @apply py-4;
        }
    }

    /* Enhanced QuickLetters with Polished Magnify Effect */
    .quick-letter {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-sm font-medium text-base-content/70;
        @apply select-none cursor-pointer;
        transform-origin: center;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        will-change: transform, opacity, color;
    }

    /* Refined hover effect */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(2.2);
        opacity: 1;
        z-index: 10;
        text-shadow: 0 0 20px hsl(var(--p) / 0.2);
    }

    /* Improved neighbor transitions */
    .quick-letter:has(+ .quick-letter:hover),
    .quick-letter:hover + .quick-letter {
        transform: scale(1.8);
        opacity: 0.9;
        z-index: 9;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter:hover),
    .quick-letter:hover + .quick-letter + .quick-letter {
        transform: scale(1.5);
        opacity: 0.7;
        z-index: 8;
    }

    .quick-letter:has(+ .quick-letter + .quick-letter + .quick-letter:hover),
    .quick-letter:hover + .quick-letter + .quick-letter + .quick-letter {
        transform: scale(1.3);
        opacity: 0.5;
        z-index: 7;
    }

    /* Refined active state */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(2);
        opacity: 1;
        z-index: 5;
        text-shadow: 0 0 15px hsl(var(--p) / 0.15);
    }

    /* Container hover enhancements */
    .quick-letters-list {
        @apply py-6;
        transition: padding 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .quick-letters-list:hover .quick-letter {
        opacity: 0.5;
        transform: scale(0.95);
    }

    .quick-letters-list:hover .quick-letter:hover {
        opacity: 1;
        transform: scale(2.2);
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            @apply py-3;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .quick-letter:active {
            transform: scale(1.8);
            @apply text-primary font-bold;
        }
        
        .quick-letters-list:hover .quick-letter {
            transform: scale(1);
            opacity: 0.7;
        }
    }

    /* Enhanced QuickLetters with Smooth Transitions */
    .quick-letters-list {
        @apply flex flex-col items-center gap-1 py-6;
        @apply relative;
        perspective: 1000px;
        transform-style: preserve-3d;
    }

    .quick-letter {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-sm font-medium text-base-content/70;
        @apply select-none cursor-pointer;
        transform-style: preserve-3d;
        transition: all 0.25s cubic-bezier(0.4, 0.0, 0.2, 1);
        will-change: transform, opacity;
    }

    /* Improved hover states with smoother transitions */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(2.2) translateZ(5px);
        opacity: 1;
        z-index: 10;
        transition-duration: 0.2s;
    }

    /* Smoother neighbor transitions */
    .quick-letters-list:hover .quick-letter:not(:hover) {
        opacity: 0.5;
        transform: scale(0.95) translateZ(0);
    }

    /* Previous and next items */
    .quick-letter:hover + .quick-letter {
        transform: scale(1.5) translateZ(2px);
        opacity: 0.8;
        z-index: 9;
        transition-duration: 0.15s;
    }

    .quick-letter:has(+ .quick-letter:hover) {
        transform: scale(1.5) translateZ(2px);
        opacity: 0.8;
        z-index: 9;
        transition-duration: 0.15s;
    }

    /* Second level neighbors */
    .quick-letter:hover + .quick-letter + .quick-letter,
    .quick-letter:has(+ .quick-letter + .quick-letter:hover) {
        transform: scale(1.2) translateZ(1px);
        opacity: 0.6;
        z-index: 8;
        transition-duration: 0.1s;
    }

    /* Active state refinements */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(2) translateZ(3px);
        opacity: 1;
        z-index: 5;
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        .quick-letter:active {
            transform: scale(1.8) translateZ(2px);
            transition-duration: 0.15s;
        }
        
        .quick-letters-list:hover .quick-letter {
            transform: scale(1) translateZ(0);
            opacity: 0.7;
        }
    }

    /* Enhanced QuickLetters with Ultra-Smooth Transitions */
    .quick-letters-list {
        @apply flex flex-col items-center gap-1 py-6;
        @apply relative;
        perspective: 1000px;
        transform-style: preserve-3d;
    }

    .quick-letter {
        @apply w-8 h-8 flex items-center justify-center;
        @apply text-sm font-medium text-base-content/70;
        @apply select-none cursor-pointer;
        transform-style: preserve-3d;
        /* Smoother base transition */
        transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
        will-change: transform, opacity;
        /* Add distance buffer */
        margin: 0.125rem 0;
    }

    /* Smooth hover state */
    .quick-letter:hover {
        @apply text-primary font-bold;
        transform: scale(2) translateZ(2px);
        opacity: 1;
        z-index: 10;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    /* Graceful scaling for non-hovered items */
    .quick-letters-list:hover .quick-letter:not(:hover) {
        opacity: 0.5;
        transform: scale(0.95) translateZ(0);
        transition-duration: 0.25s;
    }

    /* Improved neighbor transitions with distance-based scaling */
    .quick-letter:hover ~ .quick-letter,
    .quick-letter:has(~ .quick-letter:hover) {
        transition-duration: 0.2s;
    }

    /* Direct neighbors */
    .quick-letter:hover + .quick-letter,
    .quick-letter:has(+ .quick-letter:hover) {
        transform: scale(1.5) translateZ(1px);
        opacity: 0.85;
        z-index: 9;
        transition-duration: 0.18s;
    }

    /* Second-level neighbors */
    .quick-letter:hover + .quick-letter + .quick-letter,
    .quick-letter:has(+ .quick-letter + .quick-letter:hover) {
        transform: scale(1.25) translateZ(0.5px);
        opacity: 0.7;
        z-index: 8;
        transition-duration: 0.16s;
    }

    /* Third-level neighbors */
    .quick-letter:hover + .quick-letter + .quick-letter + .quick-letter,
    .quick-letter:has(+ .quick-letter + .quick-letter + .quick-letter:hover) {
        transform: scale(1.1) translateZ(0.25px);
        opacity: 0.6;
        z-index: 7;
        transition-duration: 0.14s;
    }

    /* Add hover intent delay */
    .quick-letters-list {
        transition: padding 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    .quick-letters-list:hover {
        @apply py-8;
        transition-delay: 0.05s;
    }

    /* Active state refinements */
    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(1.8) translateZ(1px);
        opacity: 1;
        z-index: 5;
        transition-duration: 0.2s;
    }

    /* Touch device optimizations */
    @media (hover: none) {
        .quick-letter {
            transition: transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
            margin: 0.25rem 0;
        }
        
        .quick-letter:active {
            transform: scale(1.8);
            transition-duration: 0.15s;
        }
    }
}

@tailwind utilities;

@layer utilities {
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }

    .animate-scale-in {
        animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .transition-gpu {
        @apply transform-gpu transition-all duration-200;
        backface-visibility: hidden;
        transform-style: preserve-3d;
        will-change: transform, opacity;
    }

    /* Animation Utilities */
    .icon-hover {
        @apply transform-gpu transition-all duration-200;
    }

    .icon-animate {
        @apply transform-gpu transition-all duration-300 relative;
        backface-visibility: hidden;
        transform-origin: center;
        will-change: transform;
    }

    .ease-spring {
        transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .content-shift {
        @apply transition-[margin,width] duration-300 ease-in-out;
    }

    .backface-hidden {
        backface-visibility: hidden;
        transform-style: preserve-3d;
    }

    /* View Transition Utilities */
    .fade-enter {
        @apply transition-opacity duration-300 ease-out;
    }

    .slide-enter {
        @apply transition-all duration-300 ease-out transform;
    }

    .zoom-enter {
        @apply transition-all duration-300 ease-out transform;
    }
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(1rem);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from { 
        opacity: 0;
        transform: scale(0.95);
    }
    to { 
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes icon-pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(0.95);
    }
}

@keyframes icon-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes loading {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes page-enter {
    0% {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes page-leave {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-20px) scale(0.98);
    }
}

@keyframes section-enter {
    0% {
        opacity: 0;
        transform: translateY(10px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slide-up {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
