@tailwind base;

@layer base {
    /* Root Custom Properties for Responsive Values */
    :root {
        --quick-letter-scale: 1.2;
        --quick-letter-hover-scale: 1.8;
        --quick-letter-spacing: 0.5rem;
    }

    @screen sm {
        :root {
            --quick-letter-scale: 1;
            --quick-letter-hover-scale: 1.4;
            --quick-letter-spacing: 0.25rem;
        }
    }

    /* Font Face */
    @font-face {
        font-family: 'Work Sans Variable';
        font-style: normal;
        font-display: swap;
        font-weight: 100 900;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/work-sans:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
        unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
    }

    /* Scrollbar Base Styles */
    * {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--p)/0.3) transparent;
    }

    *::-webkit-scrollbar {
        @apply w-1.5 h-1.5;
    }

    *::-webkit-scrollbar-track {
        @apply bg-transparent;
    }

    *::-webkit-scrollbar-thumb {
        @apply bg-primary/30 rounded-full hover:bg-primary/50 transition-colors;
    }

    /* Base Layout */
    html, body {
        @apply h-full;
    }

    main {
        @apply h-full overflow-y-auto;
    }

    /* Interactive Elements */
    button, a, input, select, textarea {
        @apply relative z-10;
    }
}

@tailwind components;

@layer components {
    /* Calendar Component */
    .fc {
        --fc-border-color: hsl(var(--b3));
        --fc-button-text-color: hsl(var(--pc));
        --fc-button-bg-color: hsl(var(--p));
        --fc-button-border-color: hsl(var(--p));
        --fc-button-hover-bg-color: hsl(var(--pf));
        --fc-button-hover-border-color: hsl(var(--pf));
        --fc-button-active-bg-color: hsl(var(--pf));
        --fc-button-active-border-color: hsl(var(--pf));
    }

    /* Navigation Styles */
    .nav-item {
        @apply relative overflow-visible transform-gpu transition-all duration-300;
        @apply hover:ring-2 hover:ring-primary/50 hover:ring-offset-1 hover:ring-offset-base-100 hover:scale-105;
        @apply focus:outline-none focus:ring-2 focus:ring-primary;
        transform-style: preserve-3d;
        backface-visibility: hidden;
    }

    .nav-item-indicator {
        @apply absolute bottom-0 left-0 right-0 h-0.5 bg-current transform scale-x-0 transition-transform duration-300;
    }

    /* Theme Preview */
    .theme-preview {
        @apply w-6 h-6 rounded-full border-2 border-base-content/20 relative;
    }

    .theme-preview-gradient {
        @apply absolute inset-[2px] rounded-full bg-gradient-to-tr from-primary to-secondary;
    }

    /* User Avatar */
    .user-avatar-status {
        @apply absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-success border-2 border-base-200;
    }

    /* Table Styles */
    .table-container {
        @apply relative overflow-y-auto touch-pan-y;
    }

    .table-header-sticky {
        @apply sticky top-0 z-10 backdrop-blur-lg bg-base-100/95;
    }

    /* Tom Select Base Styles */
    .ts-wrapper {
        @apply relative w-full;
    }

    .ts-control {
        @apply min-h-[3rem] px-3 py-2 bg-base-100 border border-base-300 rounded-xl;
        @apply flex flex-wrap items-center gap-2;
        @apply cursor-pointer hover:border-primary/50 transition-colors duration-200;
    }

    /* Quick Letters List */
    .quick-letters-list {
        @apply fixed right-4 flex flex-col items-center;
        height: calc(100vh - 16rem);  /* Adjust for header and footer */
        width: 1rem;
        font-size: 0.7rem;
        line-height: 1;
        z-index: 30;
    }

    .quick-letter {
        @apply flex items-center justify-center text-base-content/50;
        height: calc(100% / 26);  /* Evenly space letters */
        width: 100%;
        padding: 0;
        font-weight: 500;
        user-select: none;
        cursor: pointer;
        transform-origin: center right;
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
                    color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform, color;
    }

    .quick-letter:hover:not(.active) {
        @apply text-primary;
        transform: scale(1.4);
        transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
        transition-duration: 0.2s;
    }

    .quick-letter.active {
        @apply text-primary font-bold;
        transform: scale(1.85);
    }

    .quick-letter.active + .quick-letter,
    .quick-letter:has(+ .quick-letter.active) {
        transform: scale(1.4);
        @apply text-primary/70;
        transition-duration: 0.1s;
    }

    .quick-letter-magnifier {
        @apply fixed pointer-events-none;
        @apply bg-base-100/90 backdrop-blur;
        @apply shadow-lg rounded-lg;
        @apply flex items-center justify-center;
        @apply text-lg font-bold text-primary;
        @apply border border-primary/20;
        width: 2.5rem;
        height: 2.5rem;
        opacity: 0;
        transform: scale(0.8) translateX(1rem);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 100;
    }

    .quick-letter-magnifier.visible {
        opacity: 1;
        transform: scale(1) translateX(0);
    }

    .quick-letters-list--mobile {
        @apply flex-col p-2;
    }

    .quick-letters-magnify {
        @apply pointer-events-none fixed inset-0;
        @apply flex items-center justify-end;
        @apply pr-16; /* Adjust based on quick letters position */
        z-index: 29; /* Below quick letters but above most content */
    }

    .quick-letter-preview {
        @apply text-5xl font-bold text-primary;
        @apply opacity-0 scale-0;
        @apply transition-all duration-150;
        transform-origin: center right;
    }

    .quick-letter-preview.visible {
        @apply opacity-100 scale-100;
    }

    /* Magnifier Preview */
    .letter-magnifier {
        @apply fixed pointer-events-none z-[100];
        @apply bg-base-100 backdrop-blur-sm;
        @apply shadow-lg border border-primary/20;
        @apply flex items-center justify-center;
        @apply text-2xl font-bold text-primary;
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 1rem;
        opacity: 0;
        transform-origin: center right;
        transform: scale(0.8) translateX(0);
        transition: all 0.12s cubic-bezier(0.2, 0, 0, 1);
        margin-top: -1.75rem; /* Half of height to center */
        box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.1);
    }

    /* Letter Preview & Magnifier */
    .letter-preview {
        @apply fixed pointer-events-none;
        @apply text-[12rem] font-black text-primary/5;
        @apply select-none;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 99;
    }

    .letter-preview.visible {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }

    .letter-preview.visible {
        opacity: 0.15;
    }

    /* Skill Group */
    .skill-group {
        @apply touch-pan-y overscroll-contain;
        scroll-margin-top: 0;
    }

    .skill-group-header {
        @apply sticky top-0 z-20 bg-base-100/25 border-b border-base-200/10;
        transform-style: preserve-3d;
    }

    .skill-group-label {
        @apply transition-all duration-200;
    }

    .skill-group-label--hover {
        @apply hover:-translate-y-0.5 hover:shadow-lg;
    }

    /* Modal */
    .modal-box {
        @apply relative w-full max-w-lg mx-auto;
        @apply bg-base-100 rounded-2xl shadow-xl;
        @apply p-6 overflow-hidden;
        @apply transition-all duration-300 ease-out;
    }

    .modal-box--mobile {
        @apply fixed inset-0 m-0 rounded-none;
        @apply h-[100dvh] max-h-none;
        @apply flex flex-col;
    }

    /* Letter group highlight effect */
    .letter-group-highlight {
        @apply absolute inset-0 bg-primary/5;
        @apply rounded-lg;
        opacity: 0;
        transform: scaleX(0.95);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .letter-group-highlight.visible {
        opacity: 1;
        transform: scaleX(1);
    }
}

@tailwind utilities;

@layer utilities {
    /* Animation Utilities */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }

    .animate-scale-in {
        animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Transform Utilities */
    .transition-gpu {
        @apply transform-gpu transition-all duration-200;
        backface-visibility: hidden;
        transform-style: preserve-3d;
        will-change: transform, opacity;
    }

    .backface-hidden {
        backface-visibility: hidden;
        transform-style: preserve-3d;
    }
}

/* Keyframes */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(1rem);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from { 
        opacity: 0;
        transform: scale(0.95);
    }
    to { 
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes modal-enter {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}