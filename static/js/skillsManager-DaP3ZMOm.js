class a{constructor(){this.selectedSkills=new Set,this.init()}init(){const i=document.getElementById("id_skills");if(i&&i.value)try{i.value.split(",").map(e=>e.trim()).filter(Boolean).forEach(e=>{var l,n,r;const s={name:e,icon:((l=window.MODAL_ICON_MAPPING)==null?void 0:l[e.toLowerCase()])||"heroicons:academic-cap",icon_dark:((r=window.MODAL_DARK_VARIANTS)==null?void 0:r[(n=window.MODAL_ICON_MAPPING)==null?void 0:n[e.toLowerCase()]])||"heroicons:academic-cap"};this.selectedSkills.add(JSON.stringify(s))}),this.updateSelectedSkillsDisplay()}catch(t){console.error("Error parsing initial skills:",t)}window.addEventListener("skills-updated",t=>{Array.isArray(t.detail)&&(this.selectedSkills.clear(),t.detail.forEach(e=>{this.selectedSkills.add(JSON.stringify(e))}),this.updateSelectedSkillsDisplay(),this.updateHiddenInput())}),window.addEventListener("skills-restored",()=>{this.updateSelectedSkillsDisplay()})}updateHiddenInput(){const i=document.getElementById("id_skills");if(i){const t=Array.from(this.selectedSkills).map(e=>JSON.parse(e)).map(e=>e.name);i.value=t.join(","),i.dispatchEvent(new Event("change",{bubbles:!0}))}}updateSelectedSkillsDisplay(){const i=document.querySelector(".selected-skills");if(i){if(i.innerHTML="",this.selectedSkills.size===0){i.innerHTML=`<div class="text-base-content/60 text-sm">Click 'Manage Skills' to add required skills</div>`;return}Array.from(this.selectedSkills).forEach(t=>{try{const e=JSON.parse(t),s=document.createElement("div");s.className="badge badge-lg gap-2 group relative overflow-hidden p-4 bg-primary hover:bg-primary/20 border border-primary/30 hover:border-primary text-primary-content/90 hover:text-primary-content transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-md",s.innerHTML=`
                    <div class="w-8 h-8 flex items-center justify-center text-primary group-hover:scale-110 transition-transform duration-200">
                        <iconify-icon icon="${e.icon_dark||e.icon||"heroicons:academic-cap"}"></iconify-icon>
                    </div>
                    <span class="font-medium">${e.name}</span>
                    <button type="button" 
                            class="ml-1 rounded-full p-1.5 hover:bg-primary/20 active:bg-primary/30
                                   transition-all duration-200 opacity-60 hover:opacity-100"
                            title="Remove skill">
                        <iconify-icon icon="heroicons:x-mark" class="text-sm"></iconify-icon>
                    </button>`,s.querySelector("button").addEventListener("click",()=>{this.selectedSkills.delete(t),this.updateSelectedSkillsDisplay(),this.updateHiddenInput()}),i.appendChild(s)}catch(e){console.error("Error parsing skill:",e)}})}}}document.addEventListener("DOMContentLoaded",()=>{window.skillsManager=new a});
