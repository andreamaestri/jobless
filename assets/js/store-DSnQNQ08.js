import{m as s}from"./module.esm-CLWRBzRS.js";document.addEventListener("alpine:init",l);function l(){const o={theme:{current:s.$persist("Jobless").as("app_theme_current"),themes:["Jobless","Dark","lofi","pastel"],set(e){this.current=e,document.documentElement.setAttribute("data-theme",e)}},sidebar:{open:s.$persist(window.innerWidth>=1024).as("app_sidebar_open"),collapsed:s.$persist(!1).as("app_sidebar_collapsed"),toggle(){this.open=!this.open},collapse(){this.collapsed=!this.collapsed}},pageState:{isLoading:!1,init(){setTimeout(()=>{this.isLoading=!1},100),document.addEventListener("alpine:initialized",()=>{this.setupEventListeners()})},setupEventListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(this.isLoading=!1)}),window.addEventListener("beforeunload",()=>{this.isLoading=!0})}},skills:{selected:s.$persist([]).as("app_skills_selected"),maxSkills:10,icons:[],categories:[],loading:!1,search:"",filteredSkills:[],modal:{open:!1,ready:!1},init(){this.icons=this.initializeSkillIcons(),this.filteredSkills=[...this.icons],this.initializeCategories(),this.loadInitialSkills(),this.setupEventListeners()},initializeSkillIcons(){try{return window.MODAL_ICON_MAPPING?Object.entries(window.MODAL_ICON_MAPPING).map(([e,t])=>{var i;return{name:e.charAt(0).toUpperCase()+e.slice(1),icon:t,icon_dark:((i=window.MODAL_DARK_VARIANTS)==null?void 0:i[t])||t}}).sort((e,t)=>e.name.localeCompare(t.name)):[]}catch(e){return console.error("Error initializing skill icons:",e),[]}},initializeCategories(){this.categories=[...new Set(this.icons.map(e=>{const t=e.name.split(" ")[0]||"";return t.charAt(0).toUpperCase()+t.slice(1)}))].sort()},loadInitialSkills(){const e=document.getElementById("id_skills");if(e!=null&&e.value)try{const t=e.value.split(",").map(i=>i.trim()).filter(Boolean);this.clear(),t.forEach(i=>{var n,a,r;this.add({name:i,icon:((n=window.MODAL_ICON_MAPPING)==null?void 0:n[i.toLowerCase()])||"heroicons:academic-cap",icon_dark:((r=window.MODAL_DARK_VARIANTS)==null?void 0:r[(a=window.MODAL_ICON_MAPPING)==null?void 0:a[i.toLowerCase()]])||"heroicons:academic-cap"})})}catch(t){console.error("Error parsing initial skills:",t)}},setupEventListeners(){window.addEventListener("skills-updated",e=>{Array.isArray(e.detail)&&(this.selected=e.detail,this.updateHiddenInput())}),window.addEventListener("skills-restored",()=>{this.loadInitialSkills()})},add(e){return this.selected.length>=this.maxSkills||this.selected.some(t=>t.name===e.name)?!1:(this.selected.push(e),this.updateHiddenInput(),!0)},remove(e){this.selected=this.selected.filter(t=>t.name!==e),this.updateHiddenInput()},clear(){this.selected=[],this.updateHiddenInput()},has(e){return this.selected.some(t=>t.name===e)},getDarkIconForSkill(e){const t=this.selected.find(i=>i.name===e);return(t==null?void 0:t.icon_dark)||(t==null?void 0:t.icon)||"heroicons:academic-cap"},filterSkills(e=""){const t=e.toLowerCase();this.filteredSkills=t?this.icons.filter(i=>i.name.toLowerCase().includes(t)):[...this.icons]},updateHiddenInput(){const e=document.getElementById("id_skills");e&&(e.value=this.selected.map(t=>t.name).join(","),e.dispatchEvent(new Event("change",{bubbles:!0})),this.updateSelectedSkillsDisplay())},updateSelectedSkillsDisplay(){const e=document.querySelector(".selected-skills");if(e){if(e.innerHTML="",this.selected.length===0){e.innerHTML=`<div class="text-base-content/60 text-sm">Click 'Manage Skills' to add required skills</div>`;return}this.selected.forEach(t=>{const i=document.createElement("div");i.className="badge badge-lg gap-2 group relative overflow-hidden p-4 bg-primary hover:bg-primary/20 border border-primary/30 hover:border-primary text-primary-content/90 hover:text-primary-content transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-md",i.innerHTML=`
                        <div class="w-8 h-8 flex items-center justify-center text-primary group-hover:scale-110 transition-transform duration-200">
                            <iconify-icon icon="${t.icon_dark||t.icon||"heroicons:academic-cap"}"></iconify-icon>
                        </div>
                        <span class="font-medium">${t.name}</span>
                        <button type="button" 
                                class="ml-1 rounded-full p-1.5 hover:bg-primary/20 active:bg-primary/30
                                       transition-all duration-200 opacity-60 hover:opacity-100"
                                title="Remove skill">
                            <iconify-icon icon="heroicons:x-mark" class="text-sm"></iconify-icon>
                        </button>`,i.querySelector("button").addEventListener("click",()=>{this.remove(t.name)}),e.appendChild(i)})}},openModal(){this.modal.open=!0,this.modal.ready=!0,this.search="",this.filterSkills("")},closeModal(){this.modal.open=!1,this.search=""}}};s.store("app",o),s.store("app").pageState.init(),s.store("app").skills.init()}
