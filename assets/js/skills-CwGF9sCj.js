import{m as i}from"./module.esm-CLWRBzRS.js";document.addEventListener("alpine:init",()=>{i.data("skillsModal",()=>({isMobile:window.innerWidth<640,isSearchFocused:!1,searchQuery:"",suggestions:[],showSuggestions:!1,selectedIndex:-1,init(){this.setupEventListeners()},setupEventListeners(){window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<640}),window.addEventListener("skills-updated",()=>{window.skillIconsHelper&&window.skillIconsHelper.updateIcons()})},get store(){return i.store("app").skills},get modal(){return this.store.modal},async handleTagSearch(e){if(!e||e.length<2){this.suggestions=[];return}try{const s=await fetch(`/jobs/skills/autocomplete/?q=${encodeURIComponent(e)}`);if(!s.ok)throw new Error("Failed to fetch suggestions");const t=await s.json();this.suggestions=t.results,this.showSuggestions=!0,this.selectedIndex=-1}catch(s){console.error("Error fetching suggestions:",s),this.suggestions=[]}},navigateSuggestion(e){const s=this.selectedIndex+e;s>=-1&&s<this.suggestions.length&&(this.selectedIndex=s)},handleEnter(){const e=this.suggestions[this.selectedIndex];e?this.addSkill(e):this.searchQuery.trim()&&this.addSkill({name:this.searchQuery.trim()})},addSkill(e){this.store.add(e)&&(this.searchQuery="",this.suggestions=[],this.showSuggestions=!1)},closeSuggestions(){setTimeout(()=>{this.showSuggestions=!1,this.selectedIndex=-1},200)},handleSearch(e){this.store.filterSkills(e)},save(){if(this.modal.ready){const e=document.getElementById("id_skills");if(e){const s=this.store.selected.map(t=>t.name).join(",");e.value=s,e.dispatchEvent(new Event("change",{bubbles:!0}))}window.dispatchEvent(new CustomEvent("skills-updated",{detail:this.store.selected})),this.store.closeModal()}}}))});function o(){}export{o as init};
