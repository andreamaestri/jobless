import{m as s}from"./module.esm-CLWRBzRS.js";import{s as a}from"./module.esm-BQdiiSWd.js";function l(){s.store("theme",{themes:["Jobless","Dark","lofi","pastel"],current:localStorage.getItem("theme")||"Jobless",toggle(){this.current=this.current==="Jobless"?"Dark":"Jobless",localStorage.setItem("theme",this.current),document.documentElement.setAttribute("data-theme",this.current)}}),s.store("sidebar",{open:window.innerWidth>=1024,collapsed:JSON.parse(localStorage.getItem("sidebarCollapsed")||"false"),toggle(){this.open=!this.open},collapse(){this.collapsed=!this.collapsed,localStorage.setItem("sidebarCollapsed",this.collapsed)}}),s.store("pageState",{isLoading:!1,setLoading(e){this.isLoading=e}}),s.store("skills",{selected:s.$persist([]).as("selected_skills"),init(){const e=document.getElementById("id_skills");e!=null&&e.value&&(this.selected=e.value.split(",").map(t=>t.trim()))},isSelected(e){return this.selected.includes(e)},toggle(e){this.isSelected(e)?this.selected=this.selected.filter(t=>t!==e):this.selected.push(e),this.updateHiddenInput()},setSelected(e){this.selected=Array.isArray(e)?e:[],this.updateHiddenInput()},updateHiddenInput(){const e=document.getElementById("id_skills");e&&(e.value=this.selected.join(","),e.dispatchEvent(new Event("change",{bubbles:!0})))}})}function r(){s.data("skillSelector",()=>({searchQuery:"",showSuggestions:!1,selectedIndex:-1,browserSearch:"",selectedCategory:"",categories:[],skillsList:[],init(){window.SKILL_ICONS&&(this.skillsList=window.SKILL_ICONS.map(([e,t])=>({icon:e,name:t})),this.categories=[...new Set(this.skillsList.map(e=>e.icon.split(":")[0]))])},get selectedSkills(){return s.store("skills").selected},isSelected(e){return s.store("skills").isSelected(e)},addSkill(e){this.isSelected(e)||s.store("skills").toggle(e),this.searchQuery="",this.showSuggestions=!1},removeSkill(e){s.store("skills").toggle(e)},get computedFilteredSkills(){return this.searchQuery?this.skillsList.filter(e=>!this.selectedSkills.includes(e.name)).filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())).slice(0,10):[]},get filteredBrowserSkills(){return this.skillsList.filter(e=>{const t=!this.browserSearch||e.name.toLowerCase().includes(this.browserSearch.toLowerCase()),i=!this.selectedCategory||e.icon.startsWith(this.selectedCategory+":");return t&&i})},handleQuickSelect(e,t){t!=null&&t.name&&(this.isSelected(t.name)?this.removeSkill(t.name):this.addSkill(t.name))},handleKeyboardNavigation(e){const t=this.computedFilteredSkills.length-1;this.selectedIndex=Math.max(-1,Math.min(t,this.selectedIndex+e))}})),s.data("skillsModal",()=>({open:!1,ready:!1,isMobile:window.innerWidth<640,isSearchFocused:!1,search:"",init(){this.setupEventListeners(),this.ready=!0,this.open=!1},setupEventListeners(){window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<640})},handleSkillsUpdate(e){var t;this.ready&&(t=e==null?void 0:e.detail)!=null&&t.selectedSkills&&s.store("skills").setSelected(e.detail.selectedSkills)},filterSkills(){if(!window.SKILL_ICONS)return;const e=this.search.toLowerCase();this.filteredSkills=window.SKILL_ICONS.filter(([t,i])=>!e||i.toLowerCase().includes(e))},save(){this.ready&&(this.$dispatch("skills-updated",s.store("skills").selected),this.close())},cancel(){window.dispatchEvent(new CustomEvent("skills-restored")),this.close()},close(){this.open=!1,this.search="",this.filteredSkills=[]}}))}document.addEventListener("alpine:init",()=>{s.plugin(a),l(),r()});const n={initializeStores:l,initializeComponents:r};export{n as default};
